<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Fantasy Automatico by Nitesam</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/fonts/fontawesome5-overrides.min.css">
    <link rel="stylesheet" href="/assets/css/styles.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.1.1/aos.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <style type="text/css">
        body
        {
            width:80%;
            height:80%;
            padding: 6%;
            margin-left:auto;
            margin-right:auto;
        }

        .oggettoCard {
        	padding: 2%;
        }

    </style>
</head>

<body style="background-color: rgba(0,0,0,0.0);">
    <div style="background-color: rgb(0,0,0,0.3);">
			    <div>
			        <nav class="navbar navbar-light navbar-expand-md sticky-top navigation-clean-button" style="height: 80px;background-color: #4c4f52;color: #ffffff;">
			            <div class="container-fluid"><a class="navbar-brand" href="#"><i class="fa fa-globe"></i>&nbsp;Dog Pillar</a>
			                <div class="collapse navbar-collapse" id="navcol-1">
			                    <ul class="nav navbar-nav ml-auto">
			                        <li class="nav-item" role="presentation" onclick='ChiudiPagina()'><a class="nav-link active" style="color:#ffffff;"><i class="fa fa-sign-in"></i>&nbsp;Esci</a></li>
			                    </ul>
			                </div>
			            </div>
			        </nav>
			    </div>

			    <div style="height: 100%;width: 100%; background-color: #eae8e8; padding: 2%;">
			        <div class="row" data-aos="fade-up" data-aos-duration="450" data-aos-delay="50" style="padding: 10px;">
			            <div class="col-sm-4 mb-3">
			                <div class="card shadow border-left-primary py-2">
			                    <div class="card-body">
			                        <div class="row align-items-center no-gutters">
			                            <div class="col mr-2">
			                                <div class="text-uppercase text-primary font-weight-bold text-xs mb-1"><span>GUADAGNI (Orari)</span></div>
			                                <div class="text-dark font-weight-bold h5 mb-0"><span id = "qtyGuadagni">$0</span></div>
			                            </div>
			                            <div class="col-auto"><i class="fas fa-calendar fa-2x text-gray-900" style="color: #007bff;"></i></div>
			                        </div>
			                    </div>
			                </div>
			            </div>
			            <div class="col-sm-4 mb-3">
			                <div class="card shadow border-left-info py-2">
			                    <div class="card-body">
			                        <div class="row align-items-center no-gutters">
			                            <div class="col mr-2">
			                                <div class="text-uppercase text-info font-weight-bold text-xs mb-1"><span>Efficienza</span></div>
			                                <div class="row no-gutters align-items-center">
			                                    <div class="col-auto">
			                                        <div id = "percentualeProgressBar" class="text-dark font-weight-bold h5 mb-0 mr-3"><span>50%</span></div>
			                                    </div>
			                                    <div class="col">
			                                        <div class="progress progress-sm">
			                                            <div id = "progressBarMerde" class="progress-bar bg-info" style="width: 50%;"></div>
			                                        </div>
			                                    </div>
			                                </div>
			                            </div>
			                            <div class="col-auto"><i class="fas fa-clipboard-list fa-2x text-gray-300" style="color: #17a2b8;"></i></div>
			                        </div>
			                    </div>
			                </div>
			            </div>
			            <div class="col-sm-4 mb-3">
			                <div class="card shadow border-left-warning py-2">
			                    <div class="card-body">
			                        <div class="row align-items-center no-gutters">
			                            <div class="col mr-2">
			                                <div class="text-uppercase text-warning font-weight-bold text-xs mb-1"><span>Livello Miniera</span></div>
			                                <div class="text-dark font-weight-bold h5 mb-0"><span id = "qtyAggiornamenti">0</span><span>/5</span></div>
			                            </div>
			                            <div class="col-auto"><i class="fas fa-level-up-alt fa-2x text-gray-300" style="color: #ffc107;"></i></div>
			                        </div>
			                    </div>
			                </div>
			            </div>
			        </div>
			        <div id = "AcquistaJS" class="container" data-aos="fade-up" data-aos-duration="450" data-aos-delay="150" id="acquisto" style="display:flex; margin-top: 2%; padding: 20px; flex-direction: row;">
			            <section>
			                <div class="photo-card">
			                    <div class="photo-background" style="background-image:url(&quot;/assets/img/product-aeon-feature.jpg&quot;);"></div>
			                    <div class="photo-details">
			                        <h1>Chi Siamo?</h1>
			                        <p>Dog Pillar Ã¨ un'azienda leader nel settore dell'automazione mineraria.<br><br>A fronte di un piccolo contributo iniziale, ti verranno fornite strumentazioni all'avanguardia per poter sfruttare al meglio la tua miniera, dal quale
			                            riceverai minerali ogni 30 min (nella sua versione base).</p>
			                        <div class="photo-tags">
			                            <ul></ul>
			                        </div>
			                    </div>
			                </div>
			            </section>
			            <div class="row" style="width: 40%;height: 50%;padding-top: 4%;padding-left: 3%;padding-right: 2%;"><div class="wtg-alert wtg-alert-success">
        			    <div class="wtg-alert-title">
        			        <strong>Attenzione</strong>
        			    </div>
        			    <p class="wtg-alert-text">
        			        Per poter acquistare una miniera, dovrai effettuare <br>
        			        una transazione da:<br><br>
        			        <strong style="font-size: large; color:#a92424;">500.000</strong><strong style="font-size: large; color:green;"> $</strong> 
        			    </p>
						<button type="button" onClick="Acquista();" class="btn btn-success">Compra</button>
			        </div>
                </div>
			</div>

			<div class="container" data-aos="fade-up" data-aos-duration="450" data-aos-delay="150" data-aos-once="false" id="RicaviJS" style="display:block; margin-top: 5%; margin-bottom: 5%;">
                <div class="card-group">
					<div class="card oggettoCard"><img class="card-img-top w-100 d-block" />
						<div class="card-body">
							<h4 class="card-title" style = "text-align: center;">Marna da Cemento</h4>
							<p class="card-text"></p></div>
					</div>
					<div class="card oggettoCard"><img class="card-img-top w-100 d-block" />
						<div class="card-body">
							<h4 class="card-title " style = "text-align: center;">Ferro</h4>
							<p class="card-text"></p></div>
					</div>
					<div class="card oggettoCard"><img class="card-img-top w-100 d-block" />
						<div class="card-body">
							<h4 class="card-title" style = "text-align: center;">Oro</h4>
							<p class="card-text"></p></div>
					</div>
				</div>
				<div class="card-group">
					<div class="card oggettoCard"><img class="card-img-top w-100 d-block" />
						<div class="card-body">
							<h4 class="card-title" style = "text-align: center;">Marna da Cemento</h4>
							<p class="card-text"></p></div>
					</div>
					<div class="card oggettoCard"><img class="card-img-top w-100 d-block" />
						<div class="card-body">
							<h4 class="card-title " style = "text-align: center;">Ferro</h4>
							<p class="card-text"></p></div>
					</div>
					<div class="card oggettoCard"><img class="card-img-top w-100 d-block" />
						<div class="card-body">
							<h4 class="card-title" style = "text-align: center;">Oro</h4>
							<p class="card-text"></p></div>
					</div>
				</div>
            </div>

			<div class="container" data-aos="zoom-in-up" data-aos-duration="450" data-aos-delay="150" data-aos-once="false" id="AggiornamentiJS">
				<div class="row py-3">
					<div class="col-lg-10 mx-auto">
					<div class="card rounded shadow border-0">
						<div class="card-body p-5 bg-white rounded">
							<header class="text-center text-secondary" style = "margin-bottom: 8%;">
								<h1 class="display-4">Aggiornamenti</h1>
							</header>
						<div class="table-responsive">
							<table style="width:100%" class="table table-striped table-bordered">
							<thead>
								<tr>
								<th>Aggiornamento</th>
								<th>Requisiti</th>
								<th>Livello</th>
								<th>Costo</th>
								<th></th>
								</tr>
							</thead>
							<tbody>
								<tr>
								<td>Personale Qualificato</td>
								<td id = "requisitiP">Nessuno</td>
								<td id = "numeroPersonale"></td>
								<td id = "prezzoPersonale"></td>
								<td><button id = "bottone1" type="button" onClick="AcquistaPersonale();" class="btn btn-success">Compra</button></td>
								</tr>
								<tr>
								<td>Struttura Migliorata</td>
								<td id = "requisitiS">Nessuno</td>
								<td id = "numeroStruttura"></td>
								<td id = "prezzoStruttura"></td>
								<td><button id = "bottone2" type="button" onClick="AcquistaStruttura();" class="btn btn-success">Compra</button></td>
								</tr>
								<tr>
								<td>Attrezzatura Migliorata</td>
								<td id = "requisitiA">Nessuno</td>
								<td id = "numeroAttrezzatura"></td>
								<td id = "prezzoAttrezzatura"></td>
								<td><button id = "bottone3" type="button" onClick="AcquistaAttrezzatura();" class="btn btn-success">Compra</button></td>
								</tr>
								<tr>
								<td>Espansione Magazzino</td>
								<td id = "requisitiM">Nessuno</td>
								<td id = "numeroMagazzino"></td>
								<td id = "prezzoMagazzino"></td>
								<td><button id = "bottone5" type="button" onClick="AcquistaMagazzino();" class="btn btn-success">Compra</button></td>
								</tr>
							</tbody>
							</table>
							</div>
							</div>
							</div>
						</div>
					</div>
				</div>
	    	</div>
			
</div>

    <script>
        $(document).ready(function () {
            var $tabContainer = $("body");
			var inserito1 = false;
			var inserito2 = false;
			var inserito3 = false;
			var inserito5 = false;

            function SHOW_HIDE(bool) {
                if (bool) {
                    $tabContainer.show();
                } else {
                    $tabContainer.hide();
                    window.blur() 
                }
            }

            SHOW_HIDE(false); 

            $("#AggiornamentiJS").hide();
            $("#AcquistaJS").hide();
            $("#RicaviJS").hide();

            window.addEventListener('message', function (event) {
                var item = event.data;
				var aggiornamenti = (((item.agg1 + item.agg2 + item.agg3 + item.agg4 + item.agg5)/14) * 100).toFixed(0);

				$('#progressBarMerde').width(aggiornamenti + "%");
				$('#percentualeProgressBar').text(aggiornamenti + "%");
				$('#qtyAggiornamenti').text(item.livello);

				if (item.livello == 0){
					$('#qtyGuadagni').text('36,000$');
				} else if (item.livello == 1){
					$('#qtyGuadagni').text('45,600$');
				} else if (item.livello == 2){
					$('#qtyGuadagni').text('76,800$');
				} else if (item.livello == 3){
					$('#qtyGuadagni').text('97,200$');
				} else if (item.livello == 4){
					$('#qtyGuadagni').text('206,400$');
				} else if (item.livello == 5){
					$('#qtyGuadagni').text('391,200$');
				}

				if (item.acquisto == 1){
					$("#AggiornamentiJS").show();
            		$("#AcquistaJS").hide();
                }	
				else if (item.acquisto == 0) {
					$("#AggiornamentiJS").hide();
            		$("#AcquistaJS").show();

					$('#progressBarMerde').width(0 + "%");
					$('#percentualeProgressBar').text(0 + "%");
					$('#qtyAggiornamenti').text('0');
				}

                if (item.agg1 === 0){
					$("#numeroPersonale").text("1");
					$("#prezzoPersonale").text("$300,000");
					$("#bottone1").attr("disabled", false);
					inserito1 = false;
                } else if (item.agg1 === 1){
					$("#numeroPersonale").text("2");
					$("#prezzoPersonale").text("$500,000");
					$("#requisitiP").text("Struttura Migliorata LV1 & Attrezzatura Migliorata LV1");

					if (item.agg2 < 1 || item.agg3 < 1){
						$("#bottone1").attr("disabled", true);
					} else {
						$("#bottone1").attr("disabled", false);
					}
					inserito1 = false;
				} else if (item.agg1 === 2){
					$("#numeroPersonale").text("3");
					$("#prezzoPersonale").text("$700,000");
					$("#requisitiP").text("Struttura Migliorata LV2 & Attrezzatura Migliorata LV2");
					
					if (item.agg2 < 2 || item.agg3 < 2){
						$("#bottone1").attr("disabled", true);
					} else {
						$("#bottone1").attr("disabled", false);
					}
					inserito1 = false;
				} else if (item.agg1 === 3){
					if (inserito1 == false) {
						$("#requisitiP").text("LV MAX");
						$("#numeroPersonale").text("");
						$("#prezzoPersonale").text("");
						$("#numeroPersonale").append("<strong>MAX</strong>");
						$("#prezzoPersonale").append("<strong>MAX</strong>");
						$("#bottone1").attr("disabled", true);
						$("#bottone1").text("LV MAX");
						inserito1 = true;
					}
				}

                if (item.agg2 === 0){
					$("#numeroStruttura").text("1");
					$("#prezzoStruttura").text("$400,000");
					$("#bottone2").attr("disabled", false);
					inserito2 = false;
                } else if (item.agg2 === 1){
					$("#numeroStruttura").text("2");
					$("#prezzoStruttura").text("$500,000");
					$("#requisitiS").text("Personale Migliorato LV1 & Attrezzatura Migliorata LV1");
					if (item.agg1 < 1 || item.agg3 < 1){
						$("#bottone2").attr("disabled", true);
					} else {
						$("#bottone2").attr("disabled", false);
					}
					inserito2 = false;
				} else if (item.agg2 === 2){
					$("#numeroStruttura").text("3");
					$("#prezzoStruttura").text("$600,000");
					$("#requisitiS").text("Personale Migliorato LV2 & Attrezzatura Migliorata LV2");
					if (item.agg1 < 2 || item.agg3 < 2){
						$("#bottone2").attr("disabled", true);
					} else {
						$("#bottone2").attr("disabled", false);
					}
					inserito2 = false;
				} else if (item.agg2 === 3){
					$("#numeroStruttura").text("4");
					$("#prezzoStruttura").text("$700,000");
					$("#requisitiS").text("Personale Migliorato LV3 & Attrezzatura Migliorata LV3");
					if (item.agg1 < 3 || item.agg3 < 3){
						$("#bottone2").attr("disabled", true);
					} else {
						$("#bottone2").attr("disabled", false);
					}
					inserito2 = false;
				} else if (item.agg2 === 4){
					$("#numeroStruttura").text("5");
					$("#prezzoStruttura").text("$800,000");
					$("#requisitiS").text("Personale Migliorato LV3 & Attrezzatura Migliorata LV3");
					if (item.agg1 < 3 || item.agg3 < 3){
						$("#bottone2").attr("disabled", true);
					} else {
						$("#bottone2").attr("disabled", false);
					}
					inserito2 = false;
				} else if (item.agg2 === 5){
					if (inserito2 == false){
						$("#requisitiS").text("LV MAX");
						$("#numeroStruttura").text("");
						$("#prezzoStruttura").text("");
						$("#numeroStruttura").append("<strong>MAX</strong>");
						$("#prezzoStruttura").append("<strong>MAX</strong>");
						$("#bottone2").attr("disabled", true);
						$("#bottone2").text("LV MAX");
						inserito2 = true;
					}
				}

                if (item.agg3 === 0){
					$("#numeroAttrezzatura").text("1");
					$("#prezzoAttrezzatura").text("$400,000");
					$("#bottone3").attr("disabled", false);
					inserito3 = false;
                } else if (item.agg3 === 1){
					$("#numeroAttrezzatura").text("2");
					$("#prezzoAttrezzatura").text("$600,000");
					$("#requisitiA").text("Personale Migliorato LV1 & Struttura Migliorata LV1");
					if (item.agg1 < 1 || item.agg2 < 1){
						$("#bottone3").attr("disabled", true);
					} else {
						$("#bottone3").attr("disabled", false);
					}
					inserito3 = false;
				} else if (item.agg3 === 2){
					$("#numeroAttrezzatura").text("3");
					$("#prezzoAttrezzatura").text("$800,000");
					$("#requisitiA").text("Personale Migliorato LV2 & Struttura Migliorata LV2");
					if (item.agg1 < 2 || item.agg2 < 2){
						$("#bottone3").attr("disabled", true);
					} else {
						$("#bottone3").attr("disabled", false);
					}
					inserito3 = false;
				} else if (item.agg3 === 3){
					if (inserito3 == false){
						$("#requisitiA").text("LV MAX");
						$("#numeroAttrezzatura").text("");
						$("#prezzoAttrezzatura").text("");
						$("#numeroAttrezzatura").append("<strong>MAX</strong>");
						$("#prezzoAttrezzatura").append("<strong>MAX</strong>");
						$("#bottone3").attr("disabled", true);
						$("#bottone3").text("LV MAX");
						inserito3 = true;
					}
				}

                if (item.agg5 === 0){
					$("#numeroMagazzino").text("1");
					$("#prezzoMagazzino").text("$50,000");
					$("#requisitiM").text("Livello Miniera 1");

					if (item.livello < 1){
						$("#bottone5").attr("disabled", true);
					} else {
						$("#bottone5").attr("disabled", false);
					}
					
					inserito5 = false;
                } else if (item.agg5 === 1){
					$("#numeroMagazzino").text("2");
					$("#prezzoMagazzino").text("$100,000");
					$("#requisitiM").text("Livello Miniera 2");

					if (item.livello < 2){
						$("#bottone5").attr("disabled", true);
					} else {
						$("#bottone5").attr("disabled", false);
					}

					inserito5 = false;
				} else if (item.agg5 === 2){
					$("#numeroMagazzino").text("3");
					$("#prezzoMagazzino").text("$150,000");
					$("#requisitiM").text("Livello Miniera 3");
					if (item.livello < 3){
						$("#bottone5").attr("disabled", true);
					} else {
						$("#bottone5").attr("disabled", false);
					}

					inserito5 = false;
				} else if (item.agg5 === 3){
					if (inserito5 == false){
						$("#requisitiM").text("LV MAX");
						$("#numeroMagazzino").text("");
						$("#prezzoMagazzino").text("");
						$("#numeroMagazzino").append("<strong>MAX</strong>");
						$("#prezzoMagazzino").append("<strong>MAX</strong>");
						$("#bottone5").attr("disabled", true);
						$("#bottone5").text("LV MAX");
						inserito5 = true;
					}
				}


                if (item.showtab) {
                    SHOW_HIDE(true)
                } 

                if (item.hidetab) {
                    SHOW_HIDE()
                } 
            });

            document.addEventListener('keyup', function (data) {
                if (data.which == 27) {
                    SHOW_HIDE(); 

                    event.preventDefault();
                    event.stopPropagation();
                    
                    $.post("http://lavoro_automatico/Nascondi-Tablet", JSON.stringify({
                        hide: true
                    })) 
                }
            });
        });

			function ChiudiPagina(){
				event.preventDefault();
				event.stopPropagation();
				
				$.post("http://lavoro_automatico/Nascondi-Tablet", JSON.stringify({
					hide: true
				})) 

				$("body").hide();
			}

			function Acquista(){
				$.post("http://lavoro_automatico/Acquisto", JSON.stringify({}))

				$.post("http://lavoro_automatico/Nascondi-Tablet", JSON.stringify({
					hide: true
				}))	
			}

			function AcquistaPersonale(){
				var livello = parseInt($('#numeroPersonale').text());
				var prezzo = 0;

				if (livello == 1){
					prezzo = 300000;
				} else if (livello == 2){
					prezzo = 500000;
				} else if (livello == 3){
					prezzo = 700000;
				}

				$.post("http://lavoro_automatico/AcquistoAggiornamento", JSON.stringify({
					valore : 1,
					denaro : prezzo,
					livello : livello
				}))

			}

			function AcquistaStruttura(){
				var livello = parseInt($('#numeroStruttura').text());
				var prezzo = 0;

				if (livello == 1){
					prezzo = 400000;
				} else if (livello == 2){
					prezzo = 500000;
				} else if (livello == 3){
					prezzo = 600000;
				} else if (livello == 4){
					prezzo = 700000;
				} else if (livello == 5){
					prezzo = 800000;
				}

				$.post("http://lavoro_automatico/AcquistoAggiornamento", JSON.stringify({
					valore : 2,
					denaro : prezzo,
					livello : livello
				}))
			}

			function AcquistaAttrezzatura(){
				var livello = parseInt($('#numeroAttrezzatura').text());
				var prezzo = 0;

				if (livello == 1){
					prezzo = 400000;
				} else if (livello == 2){
					prezzo = 600000;
				} else if (livello == 3){
					prezzo = 800000;
				}

				$.post("http://lavoro_automatico/AcquistoAggiornamento", JSON.stringify({
					valore : 3,
					denaro : prezzo,
					livello : livello
				}))
			}

			function AcquistaMagazzino(){
				var livello = parseInt($('#numeroMagazzino').text());
				var prezzo = 0;

				if (livello == 1){
					prezzo = 50000;
				} else if (livello == 2){
					prezzo = 100000;
				} else if (livello == 3){
					prezzo = 150000;
				}

				$.post("http://lavoro_automatico/AcquistoAggiornamento", JSON.stringify({
					valore : 5,
					denaro : prezzo,
					livello : livello
				}))
			}

    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.1.1/aos.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
    <script src="/assets/js/script.min.js"></script>
</body>

</html>